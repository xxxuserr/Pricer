{% extends "base.html" %}

{% block title %}Pagina Principală - PRICER{% endblock %}

{% block content %}
    <div class="main-content">
        <div class="search-container">
            <input type="text" id="search" placeholder="Caută un produs..." required>
            <button type="button" id="searchButton">Caută</button>

            <!-- Butoane Favorite + Profil/Login -->
            <div class="icon-buttons">
                <a href="{{ url_for('favorites') }}" class="fav-icon">
                    <i class="fas fa-heart"></i>
                </a>

                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('profile') }}" class="auth-icon">
                        <i class="fas fa-user"></i>
                    </a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="auth-icon">
                        <i class="fas fa-user"></i>
                    </a>
                {% endif %}
            </div>
        </div>

        <div id="loader" class="hidden"></div>

        <ul id="productList">
            {% for product in products %}
            <li>
                <img src="{{ product.image }}" alt="{{ product.name }}">
                <div>
                    <strong><a href="{{ product.link }}" target="_blank">{{ product.name }}</a></strong><br>
                    <span class="price">{{ product.price }} MDL</span>
                    <button class="favorite-button" onclick="addToFavorites({
                        name: '{{ product.name }}',
                        price: '{{ product.price }}',
                        image: '{{ product.image }}',
                        link: '{{ product.link }}'
                    })">⭐ Adaugă la favorite</button>
                </div>
            </li>
            {% endfor %}
        </ul>

        <p class="no-results" id="noResultsMessage"></p>
    </div>
{% endblock %}
